!function(){"use strict";var t="data/net1.json",e="data/tree1.json",r=800,n=800,a=".d3view",s=".d3treeview",i=".d3ctreeview",d=function(t,e){this.force=d3.layout.force().charge(-20).gravity(.05).linkDistance(20).size([t,e]),this.svg=d3.select(a).append("svg").attr("width",t).attr("height",e)};d.prototype.render=function(t){this.force.nodes(t.nodes).links(t.links).start();var e=this.svg.selectAll(".link").data(t.links).enter().append("line").attr("class","link").attr("stroke-width",function(t){return Math.log(t.EdgeBetweenness)/Math.LN10}),r=this.svg.selectAll(".node").data(t.nodes).enter().append("g").attr("class","node").call(this.force.drag);r.append("text").attr("dx",8).attr("dy",".25em").text(function(t){return t.name}),r.append("circle").attr("class","node").attr("r",function(t){return t.Degree}),this.force.on("tick",function(){e.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),r.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})})};var o=function(t,e){this.cluster=d3.layout.cluster().size([e,t-80]),this.diagonal=d3.svg.diagonal().projection(function(t){return[t.y,t.x]}),this.svg=d3.select(s).append("svg").attr("width",t).attr("height",e).append("g").attr("transform","translate(50,0)")};o.prototype.render=function(t){var e=this.cluster.nodes(t),r=this.cluster.links(e);this.svg.selectAll(".link").data(r).enter().append("path").attr("class","link").attr("d",this.diagonal);var n=this.svg.selectAll(".node").data(e).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"});n.append("circle").attr("r",6),n.append("text").attr("dx",function(t){return t.children?-10:10}).attr("dy",20).style("text-anchor",function(t){return t.children?"end":"start"}).text(function(t){return t.name})};var c=function(t){this.tree=d3.layout.tree().size([2500,400]).separation(function(t,e){return(t.parent===e.parent?1:2)/t.depth}),this.diagonal=d3.svg.diagonal.radial().projection(function(t){return[t.y,t.x/180*Math.PI]}),this.svg=d3.select(i).append("svg").attr("width",t).attr("height",t).append("g").attr("transform","translate("+(t/2-30)+","+t/2+")")};c.prototype.render=function(t){var e=this.tree.nodes(t),r=this.tree.links(e);this.svg.selectAll(".link").data(r).enter().append("path").attr("class","link").attr("d",this.diagonal);var n=this.svg.selectAll(".node").data(e).enter().append("g").attr("class","node").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"});n.append("circle").attr("r",2),n.append("text").attr("dy",".31em").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(t){return t.name})},console.log("Network rendering start...");var l=new d(r,n),h=new c(1100),u=new o(700,350);d3.json(t,function(t){l.render(t)}),d3.json(e,function(t){u.render(t),h.render(t)}),d3.chart("Tree",{transform:function(t){var e=this;return e.data=t,t},initialize:function(){var t=this;this.cluster=d3.layout.cluster().size([this.h,this.w-80]),this.xScale=d3.scale.linear();var e=this.base.attr("width",this.w).attr("height",this.h).append("g").attr("transform","translate(50,0)");this.layer("tree",e,{dataBind:function(e){var r=t.cluster.nodes(e),n=t.cluster.links(r);this.selectAll(".link").data(n).enter().append("path").attr("class","link").attr("d",this.diagonal);var a=this.selectAll(".node").data(r).enter().append("g").attr("class","node").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"});return a},insert:function(){var t=this.chart();return t.xScale.range([5,t.w-t.r]),this.append("circle").attr("r",t.r)},events:{enter:function(){var t=this.chart();return this.attr("cx",function(e){return t.xScale(e)})}}})},width:function(t){return 0===arguments.length?this.w:(this.w=t,this)},height:function(t){return 0===arguments.length?this.h:(this.h=t,this)},radius:function(t){return 0===arguments.length?this.r:(this.r=t,this)}});var p=[1,3,4,6,10,11,20],f=d3.select(".d3chart").append("svg").chart("Tree").width(700).height(700).radius(10);f.draw(p)}();